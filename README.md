# ğŸš€ æç¤ºè¯ä¼˜åŒ–å·¥å…·

åŸºäº Go + Gin + HTML + DaisyUI å¼€å‘çš„ AI æç¤ºè¯ä¼˜åŒ–å·¥å…·ï¼Œé›†æˆ OpenAI APIï¼Œæä¾›ä¸“ä¸šçš„æç¤ºè¯ä¼˜åŒ–æœåŠ¡ã€‚

## ğŸ†• V2.0 æ–°ç‰ˆæœ¬å‘å¸ƒï¼

### ğŸŒŸ V2.0 é‡å¤§æ›´æ–°
- **ğŸ¤– å¤šæ¨¡å‹æ”¯æŒ**: æ”¯æŒ Claude 4ã€GPT-4ã€Gemini 2.5ã€DeepSeek R1 ç­‰ä¸»æµAIæ¨¡å‹
- **ğŸ“Š ç»“æ„åŒ–è¾“å‡º**: è¿”å›JSONæ ¼å¼çš„ç»“æ„åŒ–æ•°æ®ï¼ŒåŒ…å«ä½¿ç”¨æŒ‡å—ã€æµ‹è¯•ç”¨ä¾‹å’Œä¼˜åŒ–è¯´æ˜
- **âš¡ æ‰¹é‡ç”Ÿæˆ**: ä¸€é”®ç”Ÿæˆå¤šä¸ªAIæ¨¡å‹çš„ä¸“ç”¨ä¼˜åŒ–ç‰ˆæœ¬
- **ğŸ›ï¸ é«˜çº§é…ç½®**: æ”¯æŒå¤æ‚åº¦çº§åˆ«ã€ä»»åŠ¡ç±»å‹ç­‰è¯¦ç»†é…ç½®é€‰é¡¹
- **ğŸ“‹ ä½¿ç”¨æŒ‡å—**: è‡ªåŠ¨ç”Ÿæˆè¯¦ç»†çš„ä½¿ç”¨è¯´æ˜å’Œæµ‹è¯•å»ºè®®
- **ğŸ’¡ ä¼˜åŒ–è¯´æ˜**: æä¾›æŠ€æœ¯è¯¦è§£å’Œä¼˜åŒ–æ€è·¯è¯´æ˜

### ğŸ“ ç‰ˆæœ¬è®¿é—®
- **V1 ç‰ˆæœ¬**: `http://your-domain.com/` (ä¿æŒå…¼å®¹)
- **V2 ç‰ˆæœ¬**: `http://your-domain.com/v2` (å…¨æ–°åŠŸèƒ½)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### V1 ç‰ˆæœ¬åŠŸèƒ½
- ğŸ§  **æ™ºèƒ½åˆ†æ**: æ·±åº¦ç†è§£ç”¨æˆ·éœ€æ±‚ï¼Œåˆ†ææç¤ºè¯æ ¸å¿ƒè¦ç´ 
- ğŸ”§ **ä¸“ä¸šä¼˜åŒ–**: åŸºäºæœ€æ–°çš„ AI æç¤ºè¯å·¥ç¨‹æŠ€æœ¯
- ğŸš€ **å³æ—¶ç”Ÿæˆ**: å¿«é€Ÿç”Ÿæˆé«˜è´¨é‡çš„ä¼˜åŒ–æç¤ºè¯
- ğŸ“± **å“åº”å¼è®¾è®¡**: æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡

### V2 ç‰ˆæœ¬æ–°å¢åŠŸèƒ½
- ğŸ¤– **å¤šæ¨¡å‹æ”¯æŒ**: Claudeã€GPTã€Geminiã€DeepSeek å››å¤§ä¸»æµæ¨¡å‹
- ğŸ“Š **ç»“æ„åŒ–æ•°æ®**: JSONæ ¼å¼è¾“å‡ºï¼Œä¾¿äºç¨‹åºåŒ–å¤„ç†
- âš¡ **æ‰¹é‡å¤„ç†**: ä¸€æ¬¡ç”Ÿæˆå¤šä¸ªæ¨¡å‹çš„ä¸“ç”¨ç‰ˆæœ¬
- ğŸ¯ **ç²¾å‡†é…ç½®**: å¤æ‚åº¦ã€ä»»åŠ¡ç±»å‹ã€è¯­è¨€ç­‰è¯¦ç»†é€‰é¡¹
- ğŸ“‹ **å®Œæ•´æŒ‡å—**: ä½¿ç”¨è¯´æ˜ã€æµ‹è¯•ç”¨ä¾‹ã€ä¼˜åŒ–æŠ€æœ¯è¯¦è§£
- ğŸ”„ **ç‰ˆæœ¬åˆ‡æ¢**: éšæ—¶åœ¨V1å’ŒV2ä¹‹é—´åˆ‡æ¢ä½¿ç”¨

### é€šç”¨åŠŸèƒ½
- ğŸ”’ **å®‰å…¨å¯é **: å†…ç½®å®‰å…¨å¤´è®¾ç½®å’Œå†…å®¹å®‰å…¨ç­–ç•¥
- ğŸ³ **æ˜“äºéƒ¨ç½²**: å•ä¸€äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ”¯æŒå¤šæ¶æ„

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯**: Go + Gin
- **å‰ç«¯**: HTML + DaisyUI + TailwindCSS
- **AI é›†æˆ**: OpenAI API / å…¼å®¹æ¥å£
- **éƒ¨ç½²**: Caddy + Linux
- **æ„å»º**: åµŒå…¥å¼é™æ€èµ„æº

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Go 1.21+
- æœ‰æ•ˆçš„ OpenAI API Key æˆ–å…¼å®¹çš„ API æœåŠ¡

### æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**
   ```bash
   git clone https://github.com/JinFanZheng/prompt-optimize.git
   cd prompt-optimize
   ```

2. **å®‰è£…ä¾èµ–**
   ```bash
   go mod tidy
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   cp .env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½®æ‚¨çš„ API_KEY
   ```

4. **è¿è¡Œé¡¹ç›®**
   ```bash
   # è®¾ç½®ç¯å¢ƒå˜é‡
   export API_KEY="your-api-key-here"
   export BASE_URL="https://api.openai.com/v1"
   export MODEL="gpt-3.5-turbo"
   
   # è¿è¡Œ
   go run main.go
   ```

5. **è®¿é—®åº”ç”¨**
   
   æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:8092

### ç”Ÿäº§éƒ¨ç½²

#### ğŸš€ ä¸€é”®å®‰è£…/å‡çº§ï¼ˆæ¨èï¼‰

**åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šè¿è¡Œä¸€è¡Œå‘½ä»¤å³å¯å®Œæˆå®‰è£…ï¼š**

```bash
# æ–¹å¼1: ä½¿ç”¨curlï¼ˆæ¨èï¼‰
curl -fsSL https://raw.githubusercontent.com/JinFanZheng/prompt-optimize/main/quick-install.sh | sudo bash

# æ–¹å¼2: ä½¿ç”¨wget
wget -qO- https://raw.githubusercontent.com/JinFanZheng/prompt-optimize/main/quick-install.sh | sudo bash
```

#### âš™ï¸ è¿œç¨‹éƒ¨ç½²è„šæœ¬

å¦‚æœä½ å¯ä»¥SSHåˆ°æœåŠ¡å™¨ï¼Œå¯ä»¥ä½¿ç”¨è¿œç¨‹éƒ¨ç½²è„šæœ¬ï¼š

```bash
# åŸºæœ¬ç”¨æ³•
./remote-deploy.sh your-server.com

# æŒ‡å®šSSHå‚æ•°
./remote-deploy.sh -u ubuntu -p 2222 your-server.com

# ä½¿ç”¨SSHå¯†é’¥
./remote-deploy.sh --key ~/.ssh/id_rsa your-server.com

# æ¨¡æ‹Ÿè¿è¡Œ
./remote-deploy.sh --dry-run your-server.com
```

#### ğŸ”„ å‡çº§ç°æœ‰å®‰è£…

```bash
# æœ¬åœ°å‡çº§ï¼ˆåœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œï¼‰
sudo ./upgrade.sh

# è¿œç¨‹å‡çº§ï¼ˆä»æœ¬åœ°è¿è¡Œï¼‰
./remote-deploy.sh your-server.com
```

#### æ‰‹åŠ¨æ„å»ºéƒ¨ç½²

#### 1. æ„å»ºåº”ç”¨

```bash
# æ„å»º Linux ç‰ˆæœ¬
./build.sh
```

æ„å»ºå®Œæˆåï¼Œåœ¨ `dist` ç›®å½•ä¸‹ä¼šç”Ÿæˆå¯¹åº”æ¶æ„çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚

#### 2. æœåŠ¡å™¨éƒ¨ç½²

å°†æ„å»ºå¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼š

```bash
# ä¸Šä¼ äºŒè¿›åˆ¶æ–‡ä»¶
scp dist/linux-amd64/prompt-optimize user@your-server:/path/to/app/

# ä¸Šä¼ éƒ¨ç½²è„šæœ¬
scp deploy.sh user@your-server:/path/to/app/

# åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œéƒ¨ç½²è„šæœ¬
sudo ./deploy.sh
```

#### 3. é…ç½®ç¯å¢ƒå˜é‡

ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š

```bash
sudo nano /etc/prompt-optimize/env
```

è®¾ç½®æ‚¨çš„ API é…ç½®ï¼š

```env
API_KEY=your_api_key_here
BASE_URL=https://api.openai.com/v1
MODEL=gpt-3.5-turbo
PORT=8092
GIN_MODE=release
```

#### 4. å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨æœåŠ¡
sudo systemctl start prompt-optimize

# è®¾ç½®å¼€æœºè‡ªå¯
sudo systemctl enable prompt-optimize

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status prompt-optimize

# æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u prompt-optimize -f
```

#### 5. é…ç½® Caddyï¼ˆä¸€é”®é…ç½®ï¼‰

**ğŸš€ ä¸€é”®é…ç½®Caddyå’ŒåŸŸåï¼š**

```bash
# ä¸‹è½½å¹¶è¿è¡ŒCaddyé…ç½®è„šæœ¬
curl -fsSL https://raw.githubusercontent.com/JinFanZheng/prompt-optimize/main/setup-caddy.sh | sudo bash -s prompt.example.com

# æˆ–è€…äº¤äº’å¼é…ç½®
curl -fsSL https://raw.githubusercontent.com/JinFanZheng/prompt-optimize/main/setup-caddy.sh | sudo bash
```

**æ‰‹åŠ¨é…ç½®ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼š**

1. **å®‰è£… Caddy**ï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
   ```bash
   sudo apt update
   sudo apt install -y debian-keyring debian-archive-keyring apt-transport-https
   curl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/gpg.key' | sudo gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg
   curl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt' | sudo tee /etc/apt/sources.list.d/caddy-stable.list
   sudo apt update
   sudo apt install caddy
   ```

2. **é…ç½®åŸŸå**
   ```bash
   # ç¼–è¾‘ç«™ç‚¹é…ç½®
   sudo nano /etc/caddy/conf.d/prompt-optimize.conf
   # å°† your-domain.com æ›¿æ¢ä¸ºæ‚¨çš„å®é™…åŸŸå
   ```

3. **é‡æ–°åŠ è½½é…ç½®**
   ```bash
   sudo systemctl reload caddy
   ```

## ğŸ”§ é…ç½®é€‰é¡¹

| ç¯å¢ƒå˜é‡ | è¯´æ˜ | é»˜è®¤å€¼ |
|---------|------|--------|
| `API_KEY` | OpenAI API å¯†é’¥ | **å¿…é¡»è®¾ç½®** |
| `BASE_URL` | API åŸºç¡€ URL | `https://api.openai.com/v1` |
| `MODEL` | ä½¿ç”¨çš„æ¨¡å‹ | `gpt-3.5-turbo` |
| `PORT` | åº”ç”¨ç«¯å£ | `8092` |
| `GIN_MODE` | Gin è¿è¡Œæ¨¡å¼ | `release` |

## ğŸ“¡ API æ¥å£

### V1 API (å…¼å®¹ç‰ˆæœ¬)

#### POST /api/optimize

ä¼˜åŒ–æç¤ºè¯æ¥å£

**è¯·æ±‚ä½“ï¼š**
```json
{
  "input": "ç”¨æˆ·çš„æç¤ºè¯éœ€æ±‚æè¿°"
}
```

**å“åº”ï¼š**
```json
{
  "result": "ä¼˜åŒ–åçš„æç¤ºè¯å†…å®¹",
  "error": "é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœ‰ï¼‰"
}
```

### V2 API (æ–°ç‰ˆæœ¬åŠŸèƒ½)

#### POST /api/v2/optimize

ç»“æ„åŒ–ä¼˜åŒ–æç¤ºè¯æ¥å£

**è¯·æ±‚ä½“ï¼š**
```json
{
  "input": "ç”¨æˆ·çš„æç¤ºè¯éœ€æ±‚æè¿°",
  "target_models": ["claude", "gpt"],
  "complexity_level": "medium",
  "task_type": "general",
  "language": "chinese",
  "generate_multi": false
}
```

**å“åº”ï¼š**
```json
{
  "result": {
    "optimized_prompt": "ä¼˜åŒ–åçš„å®Œæ•´æç¤ºè¯",
    "usage_guide": "ä½¿ç”¨æŒ‡å—å’Œå…³é”®ä¼˜åŒ–ç‚¹",
    "test_cases": [
      {
        "input": "æµ‹è¯•è¾“å…¥ç¤ºä¾‹",
        "expected_behavior": "é¢„æœŸè¡Œä¸ºæè¿°"
      }
    ],
    "model_versions": {
      "claude": "Claudeä¸“ç”¨ä¼˜åŒ–ç‰ˆæœ¬",
      "gpt": "GPTä¸“ç”¨ä¼˜åŒ–ç‰ˆæœ¬",
      "gemini": "",
      "deepseek": ""
    },
    "optimization_notes": "ä¼˜åŒ–æŠ€æœ¯è¯´æ˜å’Œåº”ç”¨çš„æ–¹æ³•",
    "metadata": {
      "complexity_level": "medium",
      "task_type": "general", 
      "estimated_tokens": 1200,
      "target_models": ["claude", "gpt"],
      "techniques_used": ["Chain-of-Thought", "Self-Consistency"]
    }
  },
  "error": "é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœ‰ï¼‰"
}
```

#### POST /api/v2/generate-multi

æ‰¹é‡ç”Ÿæˆå¤šæ¨¡å‹ç‰ˆæœ¬

**è¯·æ±‚ä½“ï¼š**
```json
{
  "input": "ç”¨æˆ·çš„æç¤ºè¯éœ€æ±‚æè¿°",
  "target_models": ["claude", "gpt", "gemini", "deepseek"],
  "complexity_level": "complex",
  "task_type": "technical",
  "language": "chinese"
}
```

**å“åº”æ ¼å¼åŒä¸Šï¼Œä½†ä¼šä¸ºæ‰€æœ‰æŒ‡å®šæ¨¡å‹ç”Ÿæˆä¸“ç”¨ç‰ˆæœ¬**

#### GET /api/v2/models

è·å–æ”¯æŒçš„AIæ¨¡å‹åˆ—è¡¨

**å“åº”ï¼š**
```json
{
  "models": [
    {
      "id": "claude",
      "name": "Claude 4 (Sonnet/Opus)",
      "description": "Anthropicçš„Claude 4æ¨¡å‹ï¼Œæ“…é•¿å¤æ‚æ¨ç†å’Œå¯¹è¯",
      "supported": true
    },
    {
      "id": "gpt", 
      "name": "GPT-4.1/GPT-4o",
      "description": "OpenAIçš„GPT-4ç³»åˆ—æ¨¡å‹ï¼Œå…¨èƒ½å‹AIåŠ©æ‰‹",
      "supported": true
    }
  ]
}
```

### é€šç”¨æ¥å£

#### GET /health

å¥åº·æ£€æŸ¥æ¥å£

**å“åº”ï¼š**
```json
{
  "status": "ok"
}
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- âœ… HTTPS å¼ºåˆ¶é‡å®šå‘
- âœ… å®‰å…¨å“åº”å¤´è®¾ç½®
- âœ… å†…å®¹å®‰å…¨ç­–ç•¥ (CSP)
- âœ… XSS é˜²æŠ¤
- âœ… ç‚¹å‡»åŠ«æŒé˜²æŠ¤
- âœ… MIME ç±»å‹å—…æ¢é˜²æŠ¤

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
go test ./...

# æµ‹è¯• API æ¥å£
curl -X POST http://localhost:8092/api/optimize \
  -H "Content-Type: application/json" \
  -d '{"input": "å¸®æˆ‘ä¼˜åŒ–ä¸€ä¸ªå†™ä½œåŠ©æ‰‹çš„æç¤ºè¯"}'
```

## ğŸ“‹ é¡¹ç›®ç»“æ„

```
prompt-optimize/
â”œâ”€â”€ main.go              # ä¸»ç¨‹åºæ–‡ä»¶ï¼ˆåŒ…å«V1å’ŒV2ç‰ˆæœ¬ï¼‰
â”œâ”€â”€ prompt.txt           # V1å…ƒæç¤ºè¯æ–‡ä»¶
â”œâ”€â”€ prompt-v2.txt        # V2ç»“æ„åŒ–å…ƒæç¤ºè¯æ–‡ä»¶
â”œâ”€â”€ go.mod              # Go æ¨¡å—å®šä¹‰
â”œâ”€â”€ build.sh            # æ„å»ºè„šæœ¬
â”œâ”€â”€ deploy.sh           # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ Caddyfile           # Caddy é…ç½®
â”œâ”€â”€ .env.example        # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ static/             # é™æ€èµ„æº
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ style.css      # V1æ ·å¼æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ style-v2.css   # V2æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ app.js         # V1å‰ç«¯é€»è¾‘
â”‚       â””â”€â”€ app-v2.js      # V2å‰ç«¯é€»è¾‘
â”œâ”€â”€ templates/          # HTML æ¨¡æ¿
â”‚   â”œâ”€â”€ index.html         # V1ç•Œé¢æ¨¡æ¿
â”‚   â””â”€â”€ index-v2.html      # V2ç•Œé¢æ¨¡æ¿
â”œâ”€â”€ build/              # æ„å»ºè¾“å‡ºï¼ˆæ„å»ºåç”Ÿæˆï¼‰
â””â”€â”€ dist/               # å‘å¸ƒæ–‡ä»¶ï¼ˆæ„å»ºåç”Ÿæˆï¼‰
    â”œâ”€â”€ linux-amd64/
    â””â”€â”€ linux-arm64/
```

## ğŸ”„ ç‰ˆæœ¬å¯¹æ¯”

| åŠŸèƒ½ | V1ç‰ˆæœ¬ | V2ç‰ˆæœ¬ |
|------|--------|--------|
| åŸºç¡€ä¼˜åŒ– | âœ… | âœ… |
| å¤šæ¨¡å‹æ”¯æŒ | âŒ | âœ… |
| ç»“æ„åŒ–è¾“å‡º | âŒ | âœ… |
| æ‰¹é‡ç”Ÿæˆ | âŒ | âœ… |
| ä½¿ç”¨æŒ‡å— | âŒ | âœ… |
| æµ‹è¯•ç”¨ä¾‹ | âŒ | âœ… |
| ä¼˜åŒ–è¯´æ˜ | âŒ | âœ… |
| é«˜çº§é…ç½® | âŒ | âœ… |
| å¯¼å‡ºåŠŸèƒ½ | âŒ | âœ… |
| APIå…¼å®¹æ€§ | V1 API | V1 + V2 API |

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [Issues](https://github.com/JinFanZheng/prompt-optimize/issues)
2. æäº¤æ–°çš„ Issue
3. æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—ï¼š`sudo journalctl -u prompt-optimize -f`